<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Leitch">
<meta name="dcterms.date" content="2024-11-01">

<title>Revenue and new supply – ITK Research</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../ITK_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-485e50d28d76f17c9a54ab231639fb97.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-f9f99e9f92a7e94224d7c17645ae6320.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script defer="" data-domain="itkservices3.com" src="https://plausible.io/js/script.js"></script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Revenue and new supply – ITK Research">
<meta property="og:description" content="Electricity markets analysis">
<meta property="og:image" content="https://itkservices3.com/media/image-20241029120912062.pngqua">
<meta property="og:site_name" content="ITK Research">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../ITK_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ITK Research</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-dashboards-(load-slow" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Dashboards (load slow)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-dashboards-(load-slow">    
        <li>
    <a class="dropdown-item" href="../IEA.html">
 <span class="dropdown-text">IEA-electricity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../nemgen.html">
 <span class="dropdown-text">NEM-ITK</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../forecast.html">
 <span class="dropdown-text">AEMO demand fcst</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../posts.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">more</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more">    
        <li>
    <a class="dropdown-item" href="../green_iron/index.html">
 <span class="dropdown-text">Green Iron</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../presentations.html">
 <span class="dropdown-text">Presentations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../background.html">
 <span class="dropdown-text">Background notes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../energyinsiders.html">
 <span class="dropdown-text">Energy Insiders</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../posts.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../mailchimp.html"> 
<span class="menu-text">Signup</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Revenue and new supply</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Market Analysis</div>
                <div class="quarto-category">Economics &amp; Investment</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>David Leitch </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 1, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#we-need-wind-as-well-as-batteries-to-move-peak-prices-lower" id="toc-we-need-wind-as-well-as-batteries-to-move-peak-prices-lower" class="nav-link active" data-scroll-target="#we-need-wind-as-well-as-batteries-to-move-peak-prices-lower">We need wind as well as batteries to move peak prices lower</a></li>
  <li><a href="#coal-still-dominates-nem-revenue" id="toc-coal-still-dominates-nem-revenue" class="nav-link" data-scroll-target="#coal-still-dominates-nem-revenue">Coal still dominates NEM revenue</a>
  <ul class="collapse">
  <li><a href="#batteries-will-soon-be-able-to-run-40-of-nem-demand-for-2-hours-a-day" id="toc-batteries-will-soon-be-able-to-run-40-of-nem-demand-for-2-hours-a-day" class="nav-link" data-scroll-target="#batteries-will-soon-be-able-to-run-40-of-nem-demand-for-2-hours-a-day">Batteries will soon be able to run 40% of NEM demand for 2 hours a day</a></li>
  <li><a href="#increased-solar-supply-compared-to-battery-charging-demand" id="toc-increased-solar-supply-compared-to-battery-charging-demand" class="nav-link" data-scroll-target="#increased-solar-supply-compared-to-battery-charging-demand">Increased solar supply compared to battery charging demand</a></li>
  <li><a href="#wind-doesnt-need-as-many-batteries-and-will-put-pressure-on-peak-prices" id="toc-wind-doesnt-need-as-many-batteries-and-will-put-pressure-on-peak-prices" class="nav-link" data-scroll-target="#wind-doesnt-need-as-many-batteries-and-will-put-pressure-on-peak-prices">Wind doesn’t need as many batteries and will put pressure on peak prices</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Revenue_peaks.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="we-need-wind-as-well-as-batteries-to-move-peak-prices-lower" class="level2">
<h2 class="anchored" data-anchor-id="we-need-wind-as-well-as-batteries-to-move-peak-prices-lower">We need wind as well as batteries to move peak prices lower</h2>
<p>The following note basically shows that coal has lost some revenue share since 2018 but its still responsible for close to 2/3 of evening peak sales across the NEM. And that the best way to manage spilled solar and accomodate more behind the meter is to shut down coal generation during the day.</p>
<p>Also coal, unlike gas, batteries and hydro, does earn revenue steadily through 48 half hours of every day and is therefore less impacted by a decline in peak prices as compared to peak oriented fuels like gas, hydro and now batteries.</p>
<p>So far batteries have an almost invisible impact on peak prices. However battery capacity under construction will soon enable batteries to supply about 40% of demand for say almost 2 hours, assuming they start full and operated at once. More realistically allowing for other uses such as system integrity and transmission ITK expects batteries to be capable of supply 25% of peak demand within 3 years, probably less. But that’s not enough. Coal is 63% of peak demand and it all has to be replaced.</p>
<p>So we need lots of wind as well.</p>
<p>It’s also worth making the point that there is still a respectable amount of new supply coming on board. The number of projects is down but that’s offset by the increased size. For sure it’s true that not many notices to proceed have been made this year but that, in my view, is possibly because of the CIS. Its still entirely possibly to see 70% plus of renewable energy by 2030 provided the transmission and CIS plans are executed well.</p>
<p>Of course a change of Federal Goverment would slow things down a lot, but that’s all it would do, delay things. Business, in my opinion, wants Australia to get it done. We are virtually half way done, I cannot see Australia turning back. I never have been able to see it and these days even less so.</p>
<p>And then the best way to deal with the spilled solar and the ever increasing rooftop supply is to close more coal generators. At the moment midday coal supply is still 10-12 GW. That’s only another 5 years of rooftop supply or probably 3 years if we allowed for spilled utility solar at least during Spring.</p>
</section>
<section id="coal-still-dominates-nem-revenue" class="level1">
<h1>Coal still dominates NEM revenue</h1>
<p>ITK spends a lot of time looking at electricity prices and volumes and for consumers price is what matters and for the environment carbon and therefore volume by fuel is what matters.</p>
<p>For producers though what matters is revenue and profits. Its revenue that pays salaries and fuel costs, covers maintenance, end of life clean up and the myriad of other costs that determine the returns on a project.</p>
<p>For instance using Victoria, because its a large consuming region relatively advance on its decarbonisation journey coal still captures 60% of total revenue.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241030160834447.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="NEM revenue shares. Data source:NEM Review"><img src="../media/image-20241030160834447.png" class="img-fluid figure-img" alt="NEM revenue shares. Data source:NEM Review"></a></p>
<figcaption>NEM revenue shares. Data source:NEM Review</figcaption>
</figure>
</div>
<p>Looking at the 6pm to 7:30 PM window and looking across the whole NEM coal has lost 7% of available pool revenue since 2018 almost entirely to wind. The little bit of solar in the table probably reflects daylight saving effects where QLD doesn’t adopt daylight saving and the NEM runs on QLD time.</p>
<div id="tbl-Nempeakshare" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<div aria-describedby="tbl-Nempeakshare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../media/image-20241029102203578.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Table&nbsp;1: NEM wide evening peak revenue share.Data source:NEM Review"><img src="../media/image-20241029102203578.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-Nempeakshare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: NEM wide evening peak revenue share.Data source:NEM Review
</figcaption>
</figure>
</div>
<p>If we now look at the revenue by time of day, and for simplicity I exclude solar of all sorts, then then the picture is that evening peak is important but not dominant for coal as it is for some other fuels. <img src="../media/image-20241029115643997.png" class="img-fluid" alt="NEM revenue by time of day. Data: NEM Review">{#fig-revenue by time of day}</p>
<p>And this is clearer in the cumulative share of sales for a fuel per average day, here for the NEM over the past year ie same data as the prior figure. <img src="../media/image-20241029152218311.png" class="img-fluid" alt="NEM average day when fuel earns revenue, cumulative. Data:Nem review"></p>
<p>And if we want to look forward a bit we can use say Victoria for the last 90 days. Although Victoria doesn’t have that much solar, it might as well because the Victorian price is strongly impacted by solar in NSW and South Australia. For these fuels it takes from midnight to 5:30 in the afternoon to earn 50% of revenue and wind chasing RECs loses sees a sharp decline in revenue between 8 AM to 5 PM.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241029120912062.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Vic Spring cumulative revenue for a fuel. Data:NEM Review"><img src="../media/image-20241029120912062.png" class="img-fluid figure-img" alt="Vic Spring cumulative revenue for a fuel. Data:NEM Review"></a></p>
<figcaption>Vic Spring cumulative revenue for a fuel. Data:NEM Review</figcaption>
</figure>
</div>
<section id="batteries-will-soon-be-able-to-run-40-of-nem-demand-for-2-hours-a-day" class="level2">
<h2 class="anchored" data-anchor-id="batteries-will-soon-be-able-to-run-40-of-nem-demand-for-2-hours-a-day">Batteries will soon be able to run 40% of NEM demand for 2 hours a day</h2>
<p>Even in South Australia where utility BESS (battery) penetration is currently highest, batteries still have a minimal share of daily pool revenue. <img src="../media/image-20241029121551053.png" class="img-fluid" alt="SA selected fuels revenue by time of day. Data:NEM review"></p>
<p>However that’s going to change as the current BESS buildout starts to come to fruition. Using Renewmap’s data battery power is going to grow about 4X and battery energy about 6.5X.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241029121913656.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="NEM wide known utility batterie. Data: wwww.renewmap.com.au"><img src="../media/image-20241029121913656.png" class="img-fluid figure-img" alt="NEM wide known utility batterie. Data: wwww.renewmap.com.au"></a></p>
<figcaption>NEM wide known utility batterie. Data: wwww.renewmap.com.au</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241029125354135.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Lots of batteries coming. Data:www.renewmap.com.au"><img src="../media/image-20241029125354135.png" class="img-fluid figure-img" alt="Lots of batteries coming. Data:www.renewmap.com.au"></a></p>
<figcaption>Lots of batteries coming. Data:www.renewmap.com.au</figcaption>
</figure>
</div>
<p>Batteries will be able to produce 9 GW of power for around 2 hours a day</p>
<p>Average demand in the NEM is about 24.5 GW in the NEM in 2024, and that includes rooftop solar averaging 24/7 of 2.7GW. So average operational demand is about 22 GW and batteries can supply 9 GW for a couple of hours. Of course not all batteries are going to be used just for trading in the NEM. Plenty of capacity will be used for transmission support and other supporting roles. Even so its capacity that is available in an emergency</p>
<p>Overall ITK models about 6 GW of battery power to be able to trade morning and evening peaks representing around 25% of demand at that time. Certainly enough to put pressure on prices and therefore sales, partly offset from a coal generator’s point of view by increased charging demand.</p>
</section>
<section id="increased-solar-supply-compared-to-battery-charging-demand" class="level2">
<h2 class="anchored" data-anchor-id="increased-solar-supply-compared-to-battery-charging-demand">Increased solar supply compared to battery charging demand</h2>
<p>Each year there are around 2.5 GW of rooftop solar installed. That represents about 300k installations at a bit over 9 KW each. Of those 300k probably there are about 60,000 that install a battery of say 10 KWh average size, representing say 600 MWh, plus there is a significant commercial behind the meter battery market that the Australian Energy Council stated was 405 MWh in 2023 (source: Sunwizz).</p>
<p>So new rooftop solar right now will make prices go down unless there is about 4 GW of 2 hour utility battery storage installed.</p>
<p>Of course more focus on EVs could also absorb lunch time capacity conceptually but in practice it seems to me there are many barriers. There aren’t enough EVs (and the average car in Australia is 12 years old so the fleet takes a while to turnover even if 100% of new cars are electric), many cars are driven to work and its very hard to imagine having enough car chargers to charge say 0.5 million vehicles at lunch time at work places or at home. Anyhow…</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241101100236226.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="New rooftop and storage. Source:ITK"><img src="../media/image-20241101100236226.png" class="img-fluid figure-img" alt="New rooftop and storage. Source:ITK"></a></p>
<figcaption>New rooftop and storage. Source:ITK</figcaption>
</figure>
</div>
<p>Equally in the middle of the day we could replace a coal station with new rooftop solar. It’s just the other 16 hours a day that need thinking about.</p>
<p>As far as the middle of the day goes there is still 10 GW of unwanted coal generation. If it didn’t have to run and every unit operated as the test unit at Bayswater does, shutting down at 9 am and restarting at 2 pm there wouldn’t be any spilled solar and we could accomodate another 8 GW of behind the meter.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../media/image-20241101124131701.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="NEM coal gen 2024.Source:NEM Review1"><img src="../media/image-20241101124131701.png" class="img-fluid figure-img" alt="NEM coal gen 2024.Source:NEM Review1"></a></p>
<figcaption>NEM coal gen 2024.Source:NEM Review1</figcaption>
</figure>
</div>
</section>
<section id="wind-doesnt-need-as-many-batteries-and-will-put-pressure-on-peak-prices" class="level2">
<h2 class="anchored" data-anchor-id="wind-doesnt-need-as-many-batteries-and-will-put-pressure-on-peak-prices">Wind doesn’t need as many batteries and will put pressure on peak prices</h2>
<p>As <a href="#tbl-Nempeakshare" class="quarto-xref">Table&nbsp;1</a> shows the only fuel to gain a material share of the evening peak market in recent years has been wind. Yes we expect batteries to start eating into the coal and gas share and thereby hastening the demise of coal, but coal has something like 9-10 GW operating every evening peak. That’s a lot of capacity to replace when the system also needs to put pressure on gas and hydro at that time. You could do it with batteries but I argue that we need more wind more than we need more batteries, even if wind is hard to do and requires transmission.</p>
<p>On that front its worth noting that there is still 6 GW of utility wind and solar either under construction or commissioning. <img src="../media/image-20241029211724542.png" class="img-fluid" alt="Known new wind and solar. Source:Renewmap"></p>
<p>Of that the biggest projects Macintyre and Golden Plains continue to ramp up very slowly with Macintyre recently hitting 18 MW of output..</p>


</section>
</section>

</main> <!-- /main -->
<script data-isso="//comentario3.itkservices2.com/" data-isso-css="true" data-isso-css-url="null" data-isso-lang="en" data-isso-max-comments-top="10" data-isso-max-comments-nested="5" data-isso-reveal-on-click="5" data-isso-avatar="false" data-isso-avatar-bg="#f0f0f0" data-isso-avatar-fg="#9abf88 #5698c4 #e279a3 #9163b6 ..." data-isso-vote="true" data-isso-vote-levels="" data-isso-page-author-hashes="f124cf6b2f01,7831fe17a8cd" data-isso-reply-notifications-default-enabled="false" src="https://comentario3.itkservices2.com/js/embed.min.js"></script>
        <section id="isso-thread" data-title="Test tag"></section>
   
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/itkservices3\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024 ITK admin@itkservices.com.au</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>